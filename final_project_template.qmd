---
title: "Your Title"
subtitle: "BMIN503/EPID600 Final Project"
author: "FirstName LastName"
format: html
editor: visual
number-sections: true
embed-resources: true
---

------------------------------------------------------------------------

Use this template to complete your project throughout the course. Your Final Project presentation will be based on the contents of this document. Replace the title/name above and text below with your own, but keep the headers. Feel free to change the theme and other display settings, although this is not required.

## Overview {#sec-overview}

Give a brief a description of your project and its goal(s), what data you are using to complete it, and what two faculty/staff in different fields you have spoken to about your project with a brief summary of what you learned from each person. Include a link to your final project GitHub repository.

## Introduction {#sec-introduction}

Describe the problem addressed, its significance, and some background to motivate the problem. This should extend what is in the @sec-overview.

Explain why your problem is interdisciplinary, what fields can contribute to its understanding, and incorporate background related to what you learned from meeting with faculty/staff.

## Methods {#sec-methods}

Describe the data used and general methodological approach used to address the problem described in the @sec-introduction. Subsequently, incorporate full R code necessary to retrieve and clean data, and perform analysis. Be sure to include a description of code so that others (including your future self) can understand what you are doing and why.

```{r}
#| include: false
# Load necessary packages
library(tidyverse)
library(sf)
library(tidycensus)
library(ggspatial)
library(leaflet)
library(nhanesA)

```

```{r}
# Use a Census API Key to perform queries with tidycensus in R, to use data from the Decennial Census and the American Community Survey (ACS).
#| eval: FALSE 
census_api_key("8d4ae400e665d714446a25ed86d77a9125c57ec6", install = TRUE, overwrite = TRUE)
```

```{r}
decennial_2020_vars_dhc <- load_variables(
                              year = 2020, 
                              "dhc", #decennial census Demographic and Housing Characteristics file
                              cache = TRUE
                             )


vars_raceeth = c(
        all = "P2_001N",
        hisp = "P2_002N",
        white = "P2_005N",
        baa = "P2_006N",
        amin = "P2_007N",
        asian = "P2_008N",
        nhopi = "P2_009N",
        other = "P2_010N",
        multi = "P2_011N"
       )

vars_dhc_raceeth = c(
    all = "H001001",  # Total population
    hisp = "H001002", # Hispanic or Latino
    white = "H001005", # White alone
    baa = "H001006",  # Black or African American alone
    amin = "H001007", # American Indian and Alaska Native alone
    asian = "H001008", # Asian alone
    nhopi = "H001009", # Native Hawaiian and Other Pacific Islander alone
    other = "H001010", # Some other race alone
    multi = "H001011"  # Two or more races
)
```

```{r}
# 2020 Decennial Census Variables
decennial_2020_vars_pl <- load_variables(
                              year = 2020, 
                              "pl", #decennial census redistricting files
                              cache = TRUE
                             )

decennial_2020_vars_dhc <- load_variables(
                              year = 2020, 
                              "dhc", #decennial census Demographic and Housing Characteristics file
                              cache = TRUE
                             )

# 2020 ACS Variables
acs_2020_vars <- load_variables(
  year = 2020, 
  "acs5", 
  cache = TRUE
)
```

```{r}
vars_raceeth = c(
        all = "P2_001N",
        hisp = "P2_002N",
        white = "P2_005N",
        baa = "P2_006N",
        amin = "P2_007N",
        asian = "P2_008N",
        nhopi = "P2_009N",
        other = "P2_010N",
        multi = "P2_011N"
       )

census_data_raceeth = get_decennial(
  geography = "county",
  state = "PA",
  variables = vars_raceeth,
  summary_var = "P2_001N", #creates a column w/'total' variable
  year = 2020,
  sumfile = "pl"
)

# Obtain poverty variables for Philly census tracts
PA_poverty <- get_acs(geography = "tract", #query data at the tract level 
                   year = 2020,         #end year 
                   variables = c("B06012_002",  #number of individuals falling below the poverty threshold
                                 "B06012_001"), #number of individuals for whom poverty was determined
                   state = "PA", 
                   county = "Philadelphia")

# Income Data by County for PA
pa_county_income = get_acs(
                      geography = "county",
                      state = "PA",
                      table = "B19001",
                      year = 2020)## Note that leaving the 'year' argument blank tells the API to return the most recent year available. As of writing this, that is 2020 for both the ACS and Decennial Census.

```

## Results {#sec-results}

Describe your results and include relevant tables, plots, and code/comments used to obtain them. You may refer to the @sec-methods as needed. End with a brief conclusion of your findings related to the question you set out to address. You can include references if you'd like, but this is not required.

## Conclusion

This the conclusion. The @sec-results can be invoked here.
